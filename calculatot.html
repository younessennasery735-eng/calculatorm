<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>آلة حاسبة متطورة</title>
<style>
  body {
    font-family: sans-serif;
    background: linear-gradient(135deg,#4a90e2,#9013fe);
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:20px;
  }
  .calc {
    background:#ffffffdd;
    padding:25px;
    width:340px;
    border-radius:18px;
    box-shadow:0 8px 25px #0004;
    backdrop-filter:blur(6px);
  }
  #display {
    width:100%; height:65px; font-size:28px;
    padding:12px; margin-bottom:18px;
    border:1px solid #aaa; border-radius:10px;
    text-align:left; direction:ltr; background:#fafafa;
  }
  .keys { display:grid; grid-template-columns:repeat(4,1fr); gap:10px; }
  button {
    padding:16px; font-size:20px; border:none;
    border-radius:10px; cursor:pointer; background:#eee;
    transition:0.2s;
  }
  button:hover { transform:scale(1.05); }
  button.op { background:#d4edff; }
  button.eq { background:#4caf50; color:white; }
  button.clear { background:#ff7070; color:white; }
  .mem { background:#ffe8a3; }
</style>
</head>
<body>
<div class="calc">
  <input id="display" disabled />
  <div class="keys">

    <!-- Memory buttons -->
    <button class="mem" onclick="mc()">MC</button>
    <button class="mem" onclick="mr()">MR</button>
    <button class="mem" onclick="mplus()">M+</button>
    <button class="mem" onclick="mminus()">M-</button>

    <button class="clear" onclick="clearAll()">C</button>
    <button onclick="delChar()">⌫</button>
    <button class="op" onclick="add('(')">(</button>
    <button class="op" onclick="add(')')">)</button>

    <button onclick="add('7')">7</button>
    <button onclick="add('8')">8</button>
    <button onclick="add('9')">9</button>
    <button class="op" onclick="add('/')">÷</button>

    <button onclick="add('4')">4</button>
    <button onclick="add('5')">5</button>
    <button onclick="add('6')">6</button>
    <button class="op" onclick="add('*')">×</button>

    <button onclick="add('1')">1</button>
    <button onclick="add('2')">2</button>
    <button onclick="add('3')">3</button>
    <button class="op" onclick="add('-')">−</button>

    <button onclick="add('0')">0</button>
    <button onclick="add('.')">.</button>
    <button onclick="add('+')">+</button>
    <button class="eq" onclick="calculate()">=</button>
  </div>
</div>

<script>
let memory = 0;
function add(v){ document.getElementById('display').value += v; }
function clearAll(){ document.getElementById('display').value=''; }
function delChar(){ let d=document.getElementById('display'); d.value=d.value.slice(0,-1); }

function calculate(){
  let d = document.getElementById('display');
  try{
    let res = Function('return '+d.value)();
    if(isNaN(res)) throw "err";
    d.value = res;
  }catch(e){ d.value = 'خطأ'; }
}

// Memory operations
function mc(){ memory = 0; }
function mr(){ document.getElementById('display').value += memory; }
function mplus(){
  let v = Number(document.getElementById('display').value);
  if(!isNaN(v)) memory += v;
}
function mminus(){
  let v = Number(document.getElementById('display').value);
  if(!isNaN(v)) memory -= v;
}
</script>
</body>
</html>
